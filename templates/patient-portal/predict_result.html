{% extends "patient-portal/base.html" %}
{% load static %}

{% block title %}Result{% endblock title %}
{% block diet %}active{% endblock diet %}

{% block style %}
<style>
.result-container {
    max-width: 800px;
    margin: auto;
    margin-top: 25px;
}

.result-card {
    background: #fffdf5;
    border: 1px solid #f1d9a5;
    border-radius: 14px;
    padding: 22px;
    box-shadow: 0 4px 18px rgba(180,140,40,0.15);
    margin-bottom: 25px;
    animation: fadeIn 0.3s ease-in-out;
}

.graph-card {
    background: #fffefa;
    border: 1px solid #f2dfb8;
    border-radius: 14px;
    padding: 20px;
    box-shadow: 0 4px 16px rgba(200,160,60,0.12);
    animation: fadeIn 0.4s ease-in-out;
}

.graph-title {
    font-size: 1.2rem;
    font-weight: bold;
    color: #6a4b18;
    text-align: center;
    margin-bottom: 12px;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
}
</style>
{% endblock style %}

{% block content %}
<div class="result-container">

    <!-- RESULT CARD -->
    <div class="result-card">
        <h2>Your Prakriti Result</h2>
        <p><strong>Vata:</strong> {{ vata }}%</p>
        <p><strong>Pitta:</strong> {{ pitta }}%</p>
        <p><strong>Kapha:</strong> {{ kapha }}%</p>

        <h4 class="mt-3" style="color:#c28515;">
            Dominant Dosha: {{ dominant }}
        </h4>
    </div>

    <!-- GRAPH CARD -->
    <div class="graph-card">
        <div class="graph-title">Dosha Percentage Chart</div>
        <canvas id="resultChart" height="180"></canvas>
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
const ctx = document.getElementById('resultChart');

new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['Vata', 'Pitta', 'Kapha'],
        datasets: [{
            label: 'Dosha Percentage',
            data: [{{ vata }}, {{ pitta }}, {{ kapha }}],
            backgroundColor: ['#f4c542', '#e67e22', '#a3c86d'],
            borderRadius: 8,
            barThickness: 55
        }]
    },
    options: {
        responsive: true,
        plugins: {
            legend: { display: false }
        },
        scales: {
            y: {
                beginAtZero: true,
                max: 100
            }
        }
    }
});
</script>

{% endblock %}
